<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <title>Project idea details &mdash; BITtailor @ Eclipse Open IoT Challenge</title>
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="stylesheet" href="/assets/prism.css">
    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="apple-touch-icon" href="/images/logo.jpg"/>
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="BITtailor @ Eclipse Open IoT Challenge" />
    <meta name="title" content="Project idea details ">
    <link rel="canonical" href="http://incorporated.sendtoinc.com/2015/01/27/project-idea-details/">
    
    
    <meta property="og:title" content="Project idea details "/>
    <meta property="og:url" content="http://incorporated.sendtoinc.com/2015/01/27/project-idea-details/"/>
    



    <meta property="og:site_name" content="BITtailor @ Eclipse Open IoT Challenge">

</head>
<body>
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
              <i class="fa fa-home fa-2x"></i>  <i class="fa fa-plug fa-rotate-45"></i> <i class="fa fa-cloud fa-2x"></i>
              <!-- <img src="/images/logo.jpg" alt="Inc"> -->
            </a>
            <a href="/edition/second/">2.0</a>
            <a href="/edition/first">1.0</a>
            <a href="http://iot.eclipse.org/open-iot-challenge/">@Eclipse</a>
            <a href="http://openiotchallenge.tumblr.com">@tumblr</a>
        </nav>
    </header>
</section>


<article>

    <div class="container">
        <header>
            <div class="meta">
                By <address><a rel="author" href="" title="BITtailor" target="_blank">BITtailor</a></address> &mdash;
                <time pubdate datetime="2015-27-January" title="January 27, 2015">January 27, 2015</time>
            </div>
            <h1 class="title">Project idea details</h1>
            <h2 class="subtitle">Creating a maker friendly DIY IoT home automation solution</h2>
        </header>

        <section>
            
<p>Let’s dive into some details after the <a href="/2015/01/25/project-idea/">last post</a> gave an overview of my project idea.</p>

<!-- more -->

<p><img src="/images/project-overview.png" alt="Overview" /></p>

<h2 id="sensor-and-actor-nodes">Sensor and Actor Nodes</h2>
<p>All the sensor and actor nodes will be based on the <a href="http://arduino.cc/">Arduino</a> open-source physical computing platform. They will use a <a href="https://www.nordicsemi.com/eng/Products/2.4GHz-RF/nRF24L01P">nRF24L01+</a> ultra low power 2.4GHz transceiver to communicate over the <a href="#SensorAreaNetwork">wireless sensor area network</a>. They will use <a href="http://mqtt.org/new/wp-content/uploads/2009/06/MQTT-SN_spec_v1.2.pdf">MQTT-SN</a> to publish the sensor data and subscribe to actor commands.</p>

<p>I will create two types of nodes:</p>

<ul>
  <li>
    <p><strong>Battery powered sensor nodes:</strong> They will be powered with two AAA batteries and they should run for more than six months without changing the batteries. I will use a <a href="http://www.atmel.com/devices/atmega328p.aspx">ATmega328</a> running at 8MHz and operated with 3.3V. They will periodically read all the sensors, publish the data to the gateway and then sleep till the next read period, utilizing the <a href="http://mqtt.org/new/wp-content/uploads/2009/06/MQTT-SN_spec_v1.2.pdf">MQTT-SN</a> support of sleeping clients. I will create a custom PCB for a sensor node with a temperature &amp; humidity sensor and a barometric pressure sensor.</p>
  </li>
  <li>
    <p><strong>Mains powered actor nodes:</strong> Since they have no power constrains I will use the <a href="http://www.atmel.com/devices/atmega328p.aspx">ATmega328</a> running at 16MHz and operated with 5V. I will create an actor node with a relay that switches a mains socket.</p>
  </li>
</ul>

<h2 id="the-gateway-node">The Gateway Node</h2>
<p>The gateway will be built with a <a href="http://www.raspberrypi.org/">Raspberry Pi</a>. It will use a <a href="https://www.nordicsemi.com/eng/Products/2.4GHz-RF/nRF24L01P">nRF24L01+</a> 2.4GHz transceiver to communicate over the <a href="#SensorAreaNetwork">wireless sensor area network</a>. There will be three main services on the gateway node:</p>

<ul>
  <li>
    <p>A <strong>MQTT-SN gateway</strong> which <em>gateways</em> the MQTT-SN messages of the sensor area network to MQTT messages of the local area network. I will build a transparent MQTT-SN gateway with the help of the <a href="https://eclipse.org/kura/">Kura</a> framework and the <a href="https://eclipse.org/paho/">Paho</a> libraries.</p>
  </li>
  <li>
    <p>A <a href="http://mosquitto.org/">Mosquitto</a> instance as a local <strong>MQTT Broker</strong> instance.</p>
  </li>
  <li>
    <p>A <a href="http://nodered.org/">Node-RED</a> instance used to:</p>
    <ul>
      <li>Create the wiring and logic for the home automation.</li>
      <li>Forward the sensor data to cloud services.</li>
      <li>Create further API’s.</li>
    </ul>
  </li>
</ul>

<h2 id="a-namesensorareanetworkathe-wireless-sensor-area-network"><a name="SensorAreaNetwork"></a>The wireless sensor area network</h2>
<p>The wireless sensor area network will be built based on the <a href="https://www.nordicsemi.com/eng/Products/2.4GHz-RF/nRF24L01P">nRF24L01+</a> ultra low power 2.4GHz transceivers. I will use them since the are very popular in the maker area, very inexpensive and <a href="http://www.ebay.com/sch/i.html?_nkw=NRF24L01%2B">widely available</a>. The transceiver provides a link layer that features automatic packet assembly and timing, automatic acknowledgement and retransmissions of packets. On top of this a simple tree based sensor area network layer will be implemented on the sensor and actor nodes and on the gateway node. No fragmentation and reassembly will be implemented in the sensor area network layers, therefore the maximum packet size is restricted and so is the the maximum length of a <a href="http://mqtt.org/new/wp-content/uploads/2009/06/MQTT-SN_spec_v1.2.pdf">MQTT-SN</a> message.</p>

<h2 id="recap">Recap</h2>

<h3 id="hardware">Hardware</h3>

<ul>
  <li><a href="http://www.raspberrypi.org/">Raspberry Pi</a></li>
  <li><a href="http://www.atmel.com/devices/atmega328p.aspx">ATmega328</a> (<a href="http://arduino.cc/en/Main/ArduinoBoardUno">Arduino UNO</a> based)</li>
  <li><a href="https://www.nordicsemi.com/eng/Products/2.4GHz-RF/nRF24L01P">nRF24L01+</a> transivers</li>
  <li>…</li>
</ul>

<h3 id="software">Software</h3>
<ul>
  <li><a href="https://eclipse.org/kura/">Kura</a> framework</li>
  <li><a href="https://eclipse.org/paho/">Paho</a> libraries</li>
  <li><a href="http://mosquitto.org/">Mosquitto</a></li>
  <li><a href="http://nodered.org/">Node-RED</a></li>
  <li>Various <a href="http://arduino.cc/en/Reference/Libraries">Arduino libraries</a></li>
  <li><a href="http://raspbian.org/">Raspbian</a></li>
  <li>…</li>
</ul>

<h3 id="protocols">Protocols</h3>
<ul>
  <li><a href="http://mqtt.org/new/wp-content/uploads/2009/06/MQTT-SN_spec_v1.2.pdf">MQTT-SN</a></li>
  <li><a href="http://mqtt.org">MQTT</a></li>
  <li>…</li>
</ul>

<blockquote>
  <p>enough about ideas … let’s go to work and have FUN</p>
</blockquote>

            

        </section>

        <footer>
            <address>
               <img src="/images/avatar.png">
                <p>Written by <strong><a rel="author" href="https://twitter.com/bittailor_ch" title="" target="_blank">BITtailor</a></strong><br>
                <span class="muted">passion for the bits and bytes</span>
                </p>
            </address>

        </footer>

        
        <section>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'bittailoriotchallenge'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
        </section>
        
    </div>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2016

        <nav>
            <a href="http://bittailor.ch/">BITtailor</a> &middot;
            <a href="/">Blog</a> &middot;
            <a href="http://iot.eclipse.org/open-iot-challenge/">@Eclipse</a>
            <a href="http://openiotchallenge.tumblr.com">@tumblr</a>
        </nav>

        <nav class="social">
            
            <a href="https://twitter.com/bittailor_ch" title="Follow on Twitter" target="_blank">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle-thin fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x"></i>
              </span>
            </a>
            
            
            <a href="http://github.com/bittailor" title="Fork on Github" target="_blank">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle-thin fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x"></i>
              </span>
            </a>
            
            <a href="/feed.xml" title="RSS Feed">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle-thin fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x"></i>
              </span>
            </a>

        </nav>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>







</body>
</html>
